<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LHChat - Tr·ª£ l√Ω AI si√™u chuy√™n nghi·ªáp</title>
<meta name="description" content="Chatbot AI th√¥ng minh nh∆∞ ChatGPT, giao di·ªán ƒë·∫πp, t·ªëi ∆∞u tr·∫£i nghi·ªám ng∆∞·ªùi d√πng." />
<meta name="author" content="LHChat" />
<meta name="theme-color" content="#4A90E2" />

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<!-- Style -->
<link rel="stylesheet" href="style.css" />

</head>
<body>
  <div id="app" class="light-mode" role="application" aria-label="Chatbot LHChat">

    <!-- HEADER -->
    <header class="app-header" role="banner">
      <div class="logo">
        <svg aria-hidden="true" viewBox="0 0 512 512" width="40" height="40" fill="#4A90E2" xmlns="http://www.w3.org/2000/svg">
          <circle cx="256" cy="256" r="256" fill="#4A90E2"/>
          <path d="M170 170h172v172H170z" fill="#fff"/>
        </svg>
        <span class="app-title">LHChat</span>
      </div>
      <nav class="nav-actions" aria-label="T√πy ch·ªçn">
        <button id="btn-theme-toggle" aria-label="Chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô s√°ng/t·ªëi" title="Chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô s√°ng/t·ªëi" class="btn-icon">
          <i class="fas fa-moon"></i>
        </button>
        <button id="btn-clear-chat" aria-label="X√≥a l·ªãch s·ª≠ chat" title="X√≥a l·ªãch s·ª≠ chat" class="btn-icon">
          <i class="fas fa-trash"></i>
        </button>
        <button id="btn-help" aria-label="Tr·ª£ gi√∫p" title="Tr·ª£ gi√∫p" class="btn-icon">
          <i class="fas fa-question-circle"></i>
        </button>
      </nav>
    </header>

    <!-- CHAT AREA -->
    <main id="chat-container" role="main" aria-live="polite" aria-relevant="additions" tabindex="0">
      <ul id="chat-log" class="chat-log" aria-label="L·ªãch s·ª≠ tr√≤ chuy·ªán">
        <!-- Tin nh·∫Øn s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y -->
        <li class="message bot" role="alert" aria-atomic="true">
          <div class="avatar" aria-hidden="true">
            <img src="bot-avatar.png" alt="Avatar bot" />
          </div>
          <div class="message-content">
            <p>Ch√†o b·∫°n! M√¨nh l√† <strong>LHChat</strong>, h·ªèi g√¨ c≈©ng ƒë∆∞·ª£c nh√©! <span aria-label="Smiling face" role="img">üòä</span></p>
          </div>
        </li>
      </ul>
      <div id="typing-indicator" aria-live="assertive" aria-atomic="true" class="typing-indicator visually-hidden">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="sr-only">Bot ƒëang nh·∫≠p...</span>
      </div>
    </main>

    <!-- FORM INPUT -->
    <form id="input-area" class="input-area" aria-label="Khu v·ª±c nh·∫≠p tin nh·∫Øn" autocomplete="off" spellcheck="false" novalidate>
      <textarea id="user-input" name="user-input" rows="1" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." aria-required="true" aria-describedby="input-help"></textarea>
      <button type="submit" id="send-button" aria-label="G·ª≠i tin nh·∫Øn" disabled>
        <i class="fas fa-paper-plane"></i> G·ª≠i
      </button>
    </form>
    <small id="input-help" class="input-help">Nh·∫•n Enter ƒë·ªÉ g·ª≠i, Shift + Enter ƒë·ªÉ xu·ªëng d√≤ng.</small>

    <!-- FOOTER -->
    <footer class="app-footer" role="contentinfo">
      <p>¬© 2025 LHChat - Tr·ª£ l√Ω AI do b·∫°n t·∫°o ‚ù§Ô∏è</p>
      <p>
        <a href="https://github.com/LHG-Baoky/LHG-Chat" target="_blank" rel="noopener noreferrer" aria-label="Trang GitHub c·ªßa LHChat">GitHub</a> |
        <a href="#" id="footer-contact" aria-label="Li√™n h·ªá h·ªó tr·ª£">Li√™n h·ªá</a>
      </p>
    </footer>

    <!-- MODAL HELP -->
    <div id="modal-help" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modal-help-title" aria-describedby="modal-help-desc">
      <div class="modal-content">
        <header class="modal-header">
          <h2 id="modal-help-title">Tr·ª£ gi√∫p s·ª≠ d·ª•ng LHChat</h2>
          <button id="modal-close" aria-label="ƒê√≥ng c·ª≠a s·ªï tr·ª£ gi√∫p">&times;</button>
        </header>
        <div class="modal-body" id="modal-help-desc" tabindex="0">
          <p>Ch√†o b·∫°n! ƒê√¢y l√† LHChat, tr·ª£ l√Ω AI th√¥ng minh, th√¢n thi·ªán.</p>
          <ul>
            <li>Nh·∫≠p c√¢u h·ªèi r·ªìi nh·∫•n <kbd>Enter</kbd> ƒë·ªÉ g·ª≠i.</li>
            <li>Nh·∫•n <kbd>Shift + Enter</kbd> ƒë·ªÉ xu·ªëng d√≤ng trong √¥ nh·∫≠p.</li>
            <li>Ch·∫ø ƒë·ªô t·ªëi/s√°ng c√≥ th·ªÉ chuy·ªÉn ƒë·ªïi b·∫±ng bi·ªÉu t∆∞·ª£ng m·∫∑t trƒÉng.</li>
            <li>Nh·∫•n n√∫t th√πng r√°c ƒë·ªÉ x√≥a to√†n b·ªô l·ªãch s·ª≠ chat.</li>
          </ul>
          <p>N·∫øu c√≥ v·∫•n ƒë·ªÅ hay √Ω t∆∞·ªüng m·ªõi, h√£y li√™n h·ªá v·ªõi ch√∫ng m√¨nh nh√©!</p>
        </div>
      </div>
    </div>

  </div>

  <!-- SCRIPT -->
  <script>
    // DOM Elements
    const app = document.getElementById('app');
    const chatLog = document.getElementById('chat-log');
    const inputArea = document.getElementById('input-area');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const typingIndicator = document.getElementById('typing-indicator');
    const btnThemeToggle = document.getElementById('btn-theme-toggle');
    const btnClearChat = document.getElementById('btn-clear-chat');
    const btnHelp = document.getElementById('btn-help');
    const modalHelp = document.getElementById('modal-help');
    const modalClose = document.getElementById('modal-close');

    // Utils
    function createMessage(text, sender = 'bot') {
      const li = document.createElement('li');
      li.classList.add('message', sender);
      li.setAttribute('role', 'alert');
      li.setAttribute('aria-atomic', 'true');

      const avatar = document.createElement('div');
      avatar.classList.add('avatar');
      const img = document.createElement('img');
      img.alt = sender === 'bot' ? 'Avatar bot' : 'Avatar ng∆∞·ªùi d√πng';
      img.src = sender === 'bot' ? 'bot-avatar.png' : 'user-avatar.png';
      avatar.appendChild(img);

      const content = document.createElement('div');
      content.classList.add('message-content');
      content.innerHTML = text;

      li.appendChild(avatar);
      li.appendChild(content);

      return li;
    }

    // Append message and scroll to bottom
    function appendMessage(message) {
      chatLog.appendChild(message);
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    // Bot reply simulation (replace with real API call)
    function botReply(userText) {
      return new Promise(resolve => {
        setTimeout(() => {
          const responses = [
            "M√¨nh ƒëang suy nghƒ©...",
            "B·∫°n h·ªèi hay ƒë·∫•y!",
            "ƒê·ªÉ m√¨nh t√¨m hi·ªÉu nh√©!",
            "R·∫•t vui ƒë∆∞·ª£c gi√∫p b·∫°n.",
            "B·∫°n c√≥ mu·ªën h·ªèi th√™m g√¨ kh√¥ng?"
          ];
          const randomResponse = responses[Math.floor(Math.random() * responses.length)];
          resolve(randomResponse);
        }, 1500 + Math.random() * 1500);
      });
    }

    // Typing indicator show/hide
    function showTyping() {
      typingIndicator.classList.remove('visually-hidden');
      chatLog.scrollTop = chatLog.scrollHeight;
    }
    function hideTyping() {
      typingIndicator.classList.add('visually-hidden');
    }

    // Enable/Disable send button based on input
    userInput.addEventListener('input', () => {
      sendButton.disabled = userInput.value.trim().length === 0;
      autoResizeTextarea(userInput);
    });

    // Auto resize textarea
    function autoResizeTextarea(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = textarea.scrollHeight + 'px';
    }
    autoResizeTextarea(userInput);

    // Submit handler
    inputArea.addEventListener('submit', async e => {
      e.preventDefault();
      const text = userInput.value.trim();
      if (!text) return;

      // Add user message
      appendMessage(createMessage(text, 'user'));

      // Reset input
      userInput.value = '';
      sendButton.disabled = true;
      autoResizeTextarea(userInput);

      // Show typing
      showTyping();

      // Get bot reply
      const reply = await botReply(text);

      // Hide typing
      hideTyping();

      // Add bot reply message
      appendMessage(createMessage(reply, 'bot'));
    });

    // Keyboard support for textarea: Enter send, Shift+Enter newline
    userInput.addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        if (!sendButton.disabled) {
          inputArea.dispatchEvent(new Event('submit'));
        }
      }
    });

    // Theme toggle
    btnThemeToggle.addEventListener('click', () => {
      if (app.classList.contains('light-mode')) {
        app.classList.replace('light-mode', 'dark-mode');
        btnThemeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        btnThemeToggle.setAttribute('aria-label', 'Chuy·ªÉn sang ch·∫ø ƒë·ªô s√°ng');
      } else {
        app.classList.replace('dark-mode', 'light-mode');
        btnThemeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        btnThemeToggle.setAttribute('aria-label', 'Chuy·ªÉn sang ch·∫ø ƒë·ªô t·ªëi');
      }
    });

    // Clear chat
    btnClearChat.addEventListener('click', () => {
      if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ chat kh√¥ng?')) {
        chatLog.innerHTML = '';
        appendMessage(createMessage('Ch√†o b·∫°n! M√¨nh l√† <strong>LHChat</strong>, h·ªèi g√¨ c≈©ng ƒë∆∞·ª£c nh√©! üòä', 'bot'));
      }
    });

    // Help modal toggle
    btnHelp.addEventListener('click', () => {
      modalHelp.classList.remove('hidden');
      modalHelp.querySelector('.modal-body').focus();
    });
    modalClose.addEventListener('click', () => {
      modalHelp.classList.add('hidden');
      userInput.focus();
    });

    // Close modal on outside click
    modalHelp.addEventListener('click', (e) => {
      if (e.target === modalHelp) {
        modalHelp.classList.add('hidden');
        userInput.focus();
      }
    });

    // Initial focus on input
    window.addEventListener('load', () => {
      userInput.focus();
    });

  </script>

</body>
</html>
<form id="chat-form">
  <input id="chat-input" type="text" placeholder="Nh·∫≠p c√¢u h·ªèi..." autocomplete="off" />
  <button type="submit">G·ª≠i</button>
</form>
<div id="chat-box" style="height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;"></div>

